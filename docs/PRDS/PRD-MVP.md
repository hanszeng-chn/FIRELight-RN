# FIRELight

## 🧠 产品背景

**FIRE（Financial Independence, Retire Early）**是一种通过高储蓄率和聪明投资，实现尽早退休和财务自由的生活理念。一个支持FIRE理念的应用需要帮助用户方便地实现：

- 记账：持续跟踪掌握收支/储蓄率情况。
- 投资记账：掌握自己资产组合的收益情况。
- 资产负债表：清楚掌握自己的资产负债表情况。

## 🚀 产品名称 FIRELight

寓意点燃FIRE之路的起点，轻量、聚焦、逐步积累财富自由之光。

## 🎯 核心目标（MVP）

实现一个纯客户端的记账系统，满足：

- 收支条目管理

## 收支条目管理模块

**功能描述**：记录每一笔收入和支出，支持分类、备注等多维度信息记录。

**主要功能点**：
- 快速记账：一键添加收入/支出条目
- 分类管理：支持自定义收支分类（如餐饮、交通、工资、投资收益等）
- 条目编辑：修改已记录的条目信息
- 条目删除：删除错误条目
- 条目搜索：按日期、分类、金额、备注等条件筛选

**数据模型**：
| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 条目唯一标识 |
| type | Enum | 类型 (income/expense) |
| amount | Decimal | 金额 |
| category_id | UUID | 分类ID |
| date | Date | 发生日期 |
| note | String | 备注 |
| created_at | DateTime | 创建时间 |
| updated_at | DateTime | 更新时间 |

## 交互设计

> MVP 阶段原则：无用户系统，数据本地存储，专注于核心价值验证。

### 📐 图例说明

- `|...|` : 屏幕边界
- `[ ]` : 交互组件
- `( )` : 文本/标签
- `->` : 跳转/动作

---

### 1. 核心功能 (Core Features)

#### 1.1 首页概览 (Dashboard)

_路径: /app/(tabs)/index_
_目标: 按月份查看账目明细，快速记账_

|--------------------------------------------------|
| (Header: FIRELight)                              |
|--------------------------------------------------|
| [ 2026年 1月 v ]       收入 1000 | 支出 500      |
|--------------------------------------------------|
| (Section: 01月18日)                     支出 12  |
|  [Icon] 早餐                            -10      |
|  [Icon] 地铁                             -2      |
|                                                  |
| (Section: 01月17日)                   收入 5000  |
|  [Icon] 工资                          +5000      |
|  ...                                             |
|                                                  |
|--------------------------------------------------|
| [Button: + 记一笔] (Floating Action, Bottom Right)|
|--------------------------------------------------|

**交互逻辑:**

1. **月份选择**: 点击顶部“年份月份”区域，弹出月份选择器（DatePicker/MonthPicker）。
2. **列表展示**: 根据选中月份，按日期分组展示账目条目。
3. **数据加载**: 默认加载最新有数据的月份，完全没数据就展示当前月份。
4. **空状态**: 该月份无数据时，显示“本月暂无账目，快记一笔吧”。
5. **记账入口**: 点击右下角悬浮按钮（FAB）进入记账页面。

#### 1.2 记一笔 (Add Transaction)

_路径: /app/add-transaction_
_目标: 快速选择分类并输入金额_

|--------------------------------------------------|
| [ < 返回 ] [Tab: 支出 (Active)]  [Tab: 收入]        |
|--------------------------------------------------|
| (Category Grid - Swipeable Page 1: 支出)         |
| [餐饮] [交通] [购物] [居住]                      |
| [娱乐] [医疗] [教育] [人情]                      |
| [ ... ] [⚙️ 设置]                                |
|                                                  |
|--------------------------------------------------|
| (Popup Input Module - Bottom Sheet/Overlay)      |
|  [Display: $ 120.00]                             |
|  [Input: 备注...]                                |
| ------------------------------------------------ |
|  1  2  3  [Backspace]                            |
|  4  5  6  [OK/完成]                              |
|  7  8  9                                         |
|  .  0  [Date: 📅 今天]                           |
|--------------------------------------------------|

**交互逻辑:**

1. **初始状态**:
    - 仅展示分类列表，无输入框和键盘。
2. **触发记账**:
    - 点击任意分类图标 -> 弹出悬浮输入模块（覆盖底部或作为 Bottom Sheet）。
    - **设置入口**: 点击分类列表最后的 `[⚙️ 设置]` 图标 -> 跳转至 **分类管理** 页面。
3. **输入模块**:
    - **金额显示**: 顶部大字号展示当前输入金额。
    - **备注输入**: 金额下方提供备注输入框。
    - **数字键盘**:
        - 数字键 (0-9, .)。
        - 回退键 (Backspace)。
        - 完成键 (OK): 提交数据。
        - **日期键**:
            - 样式: 上方日历图标，下方日期文案。
            - 文案规则: 若为当天显示“今天”，否则显示具体日期 (e.g., "01-18")。
            - 交互: 点击弹出系统日期选择器，选择后更新按键文案。
4. **提交**:
    - 点击“完成”键 -> 校验金额 > 0 -> 保存 -> 关闭弹窗及页面 -> 刷新首页。

#### 1.3 分类管理 (Category Management)

_路径: /app/category-management_
_目标: 管理支出/收入分类（新增、停用、排序）_

|--------------------------------------------------|
| [ < 返回 ]        分类管理                       |
|--------------------------------------------------|
| [Tab: 支出 (Active)]  [Tab: 收入]                |
|--------------------------------------------------|
| (List: 启用中 - 可拖拽排序)                      |
| (Section: 系统 & 自定义混合)                     |
| [=]  [Icon] 餐饮 (系统)                [ ⛔️ ]   |
| [=]  [Icon] 交通 (系统)                [ ⛔️ ]   |
| [=]  [Icon] 游戏氪金 (自定义) [ 编辑 ]  [ ⛔️ ]   |
|                                                  |
| (List: 已停用 - 置灰显示)                        |
| [➕]  [Icon] 购物 (系统)                          |
| [➕]  [Icon] 撸猫 (自定义)                        |
|                                                  |
|--------------------------------------------------|
| [Button: + 新增分类] (Bottom Fixed)              |
|--------------------------------------------------|
| (Bottom Sheet Popup: 新增/编辑分类)              |
|  [Icon Preview: "G"] (Auto Generated)            |
|  [Input: 游戏] (Focus)                           |
|  [Button: 确认]                                  |
|--------------------------------------------------|

**交互逻辑:**

1. **列表操作**:
    - **排序**: 仅“启用中”的分类可拖拽排序。
    - **停用/删除**:
        - 点击 `[⛔️]`，系统根据分类属性和数据状态执行不同逻辑：
        - **物理删除**: 仅针对 **无历史数据的自定义分类**。确认后直接销毁，不再显示。
        - **停用 (软删除)**: 针对 **系统分类** 或 **已有历史数据的自定义分类**。确认后移至“已停用”列表，保留历史数据关联。
    - **恢复/添加**:
        - 在“已停用”列表中点击 `[➕]`，分类恢复到“启用中”列表底部，解除置灰。
    - **自动清理 (Garbage Collection)**:
        - 每次进入该页面时，系统自动扫描并 **物理删除** 那些 **已停用且无任何关联数据** 的 **自定义分类**。用户无需手动处理。
    - **编辑**: 仅自定义分类支持编辑名称（触发弹窗）。
2. **新增/编辑分类 (Popup)**:
    - 点击底部按钮或编辑按钮 -> 弹出底部弹窗（Bottom Sheet）。
    - **图标生成逻辑**:
        - 不支持手动选择图标。
        - 自动截取输入名称的第一个字符。
        - 若为英文字母 -> 转大写。
        - 作为图标展示（背景色随机或固定）。
    - **保存**: 校验名称不为空且不重复 -> 保存并刷新列表。